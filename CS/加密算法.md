# 加密算法

> [IOS应用安全-加解密算法简述](https://dishibolei.github.io/2017/05/25/save-encode/)
内容挺多, 下面只是简单摘下, 具体看上面原文.

## 字符编码
* 字符编码
* ASCII
* UNICODE
* UTF-8UTF-16
* UTF-32

1. 字符编码就是把可读的字符转化为二进制数据方法，字符解码就是把二进制数据转化为可读的方法。
2. ASCII占用1个字节，只有128个字符，主要是英文字符。
3. UNICODE是国际标准编码字符集，包含了所有已知符号。
4. UTF-8是UNICODE编码的一种实现方式，兼容ASCII码，也就是英文字符占1个字节，汉字可能占两个字节或三个字节。
5. UTF-16也是UNICODE编码的一种实现方式，通常和UNICODE编码一致，占用两个字节，分大小端。

## Base64编码
`Base64`是一种编码算法，`不是加密算法`,他的作用不是加密，而是用最简的ASCII码来传输文本数据，屏蔽掉设备网络差异，是为了方便传输的一种算法。很多加密算法，最后生成的是二进制数据，不是可见字符，而传输的一般是通过字符传输，所以常见的二进制转化方式就是Base64算法。

`Base64编码的作用是把非ASCII的字符转换为ASCII的字符`。很多加密算法，很喜欢做一次Base64转换。原因是使用Base64编码后，所有的数据都是ASCII字符，方便在网络上传输。

设计思路：Base64把每三个8Bit的字节转换为四个6Bit的字节（38 = 46 = 24），然后把6Bit再添两位高位0，组成四个8Bit的字节。所以Base64算法生成的数据会比原数据大1/3左右。

## 哈希散列算法
> 散列（Hash）函数提供了这一服务，它对不同长度的输入消息，产生固定长度的输出。

散列值主要使用的场景：

* 生成唯一的值做索引，比如哈希表
* 用作数据签名，校验数据完整性和有效性。
* 密码脱敏处理。

### MD5算法
> MD5以512位分组来处理输入的信息，且每一分组又被划分为十六个32位子分组，经过了一系列的处理后，算法的输出由4个32位分组组成，将这4个32位分组级联后将生成1个128位散列值。

* **MD5不是加密算法**，重要的用户密码应该加密存储。做MD5只是为了脱敏，也就是不让相关人员知道原文是什么（包括内鬼）。
* 极重要数据是用更安全的算法：比如用户密码数据使用更安全的算法，比如SHA1算法。传输过程中也进一步加密。
* 如果使用MD5算法，在原始值里面加入盐值。盐值要尽量随机。因为如果加入随机值后原始值也变得随机，使用暴力破解就基本不可能了。即result = MD5(password + salt)

**密码做MD5更重要的是脱敏处理，不能做为安全的加密使用，重要的用户密码持久化或传输过程中一定是要通过加密算法处理的。**

### SHA1
SHA1也是一种HASH算法。是MD5的替代方案。生成的数据是160位，20个字节。

目前SHA1也被认为不安全,google找到了算法进行了碰撞,所以普遍推荐使用新的SHA2代替。Google已经开始废弃这个算法了.

### SHA2
* SHA-224、SHA-256、SHA-384，和SHA-512并称为SHA-2。
* 新的散列函数并没有接受像SHA-1一样的公众密码社区做详细的检验，所以它们的密码安全性还不被大家广泛的信任。
 * 虽然至今尚未出现对SHA-2有效的攻击，它的算法跟SHA-1基本上仍然相似；因此有些人开始发展其他替代的散列算法。

SHA-256输出为256位，32字节。
SHA-512输出为512位，64字节。

### HMac
HMac是秘钥相关的哈希算法。和之前的算法不同的在于需要一个秘钥，才能生成输出。主要是基于签名散列算法。可以认为是散列算法加入了加密逻辑，所以相比SHA算法更难破解。

HMAC主要应用场景：

* 密码的散列存储，因为需要散列的时候需要密码，实际上相当于算法里加了盐值。使用的密码要随机和用户相关，请参考盐值的生产规则。
* 用于数据签名。双方使用共同的秘钥，然后做签名验证。秘钥可以固化，也可以会话开始前协商，增加签名篡改和被破解的难度。

### 总结
* 密码保存和传输需要做散列处理。但是散列算法主要是脱敏，不能替代加密算法。
* 如今常用的Md5算法和SHA1算法都不再安全。所以推荐使用SHA-2相关算法。
* 散列算法应该加入盐值即：result=HASH(password+salt)。其中盐值应该是随机字符串且每个用户不一样。
* HMac引入了秘钥的概念，如果不知道秘钥，秘钥不同，散列值也不同，相当于散列算法加入了盐值。可以把它当做更安全的散列算法使用。

## 对称加密算法
* DES
* 3DES
* AES




